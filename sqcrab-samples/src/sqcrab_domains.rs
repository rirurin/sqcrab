pub struct Test ; impl :: sqcrab :: domain :: DomainRegistrar for Test { fn add_functions (vm : & mut :: sqcrab :: squirrel :: vm :: SquirrelVM) -> Result < () , :: sqcrab :: squirrel :: err :: SquirrelError > { vm . add_function ("unit_get_hp" , | vm | { let p1 = unsafe { vm . get_this :: < crate :: unit :: Unit > () . unwrap () } ; let ret = crate :: unit :: Unit :: get_hp (p1) ; vm . push :: < u32 > (& ret) ; 1i64 }) ? ; vm . add_function ("unit_set_hp" , | vm | { let p2 = unsafe { vm . get_this :: < crate :: unit :: Unit > () . unwrap () } ; let p1 = vm . get :: < u32 > (1usize) . unwrap () ; crate :: unit :: Unit :: set_hp (p2 , p1) ; 0i64 }) ? ; vm . add_function ("unit_get_mp" , | vm | { let p1 = unsafe { vm . get_this :: < crate :: unit :: Unit > () . unwrap () } ; let ret = crate :: unit :: Unit :: get_mp (p1) ; vm . push :: < u32 > (& ret) ; 1i64 }) ? ; vm . add_function ("unit_set_mp" , | vm | { let p2 = unsafe { vm . get_this :: < crate :: unit :: Unit > () . unwrap () } ; let p1 = vm . get :: < u32 > (1usize) . unwrap () ; crate :: unit :: Unit :: set_mp (p2 , p1) ; 0i64 }) ? ; Ok (()) } }